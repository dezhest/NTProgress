# Real-time Deals Sorting
 **SwiftUI MVVM**
 ![NTP](https://user-images.githubusercontent.com/99794753/226323245-d67b0e7c-9871-411d-b616-7c3231f29094.png)
  Протестировано на iPhone 7 (iOS 15.7.3), 30% загрузки ЦП при фоновой сортировки на миллионе данных, вершины на графике - процесс пересортировки массива(3-4 секунды)
  
- При запуске аппки в .onApperar метод startDealsPipe() запускает метод subscribeToDeals()
- Переменная newDealsToSort набивается неотсортированными элементами и с частотой 1Гц добавляется в массив deals, затем обнуляется. Метод слияния был выбран, как один из самых эфективных для совместной сортировки двух отсортированных массивов.
- На lazy переменную sorthingMetod = dataSortUp,  стоит willSet. Он ставит на паузу startDealsPipe() и асинхронно отсортировывает deals = [Deal] по нужному типу с помощью .sorted(by:). Затем продолжается сортировка методом слияния уже по новому типу и доотсортировываются накопившиеся за это время newDealsToSort 
- На время паузы появляется анимация загрузки, на миллионе элементов пауза при пересортировке составляет не более 3-4 секунд
- Отображение элеметов с помощью ScrollView, LazyVGrid, ForEach, .id(UUID)
